================================================================
    RASPBERRY PI 4 - DROWSINESS DETECTION SYSTEM DIAGRAM
================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYSTEM OVERVIEW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Camera    â”‚â”€â”€â”€â”€â”€â”€â”‚  Raspberry Pi 4  â”‚â”€â”€â”€â”€â”€â”€â”‚   Buzzer    â”‚
â”‚  (USB/CSI)  â”‚ USB/ â”‚   + Model AI     â”‚ GPIO â”‚   (5V)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ CSI  â”‚   + GPIO Control â”‚  17  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HDMI (Optional)
                              â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚     Monitor      â”‚
                     â”‚  (OpenCV + GUI)  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================
    GPIO PINOUT - BUZZER CONNECTION
================================================================

          Raspberry Pi 4 GPIO Header (40 pins)
          
    3.3V [ 1] [ 2] 5V â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   GPIO2 [ 3] [ 4] 5V            â”‚ (Optional: 
   GPIO3 [ 5] [ 6] GND â—„â”€â”€â”€â”€â”€â”   â”‚  Power Buzzer
   GPIO4 [ 7] [ 8] GPIO14     â”‚   â”‚  with Transistor)
     GND [ 9] [10] GPIO15     â”‚   â”‚
â”Œâ”€ GPIO17 [11] [12] GPIO18    â”‚   â”‚
â”‚  GPIO27 [13] [14] GND       â”‚   â”‚
â”‚  GPIO22 [15] [16] GPIO23    â”‚   â”‚
â”‚    3.3V [17] [18] GPIO24    â”‚   â”‚
â”‚  GPIO10 [19] [20] GND       â”‚   â”‚
â”‚   GPIO9 [21] [22] GPIO25    â”‚   â”‚
â”‚  GPIO11 [23] [24] GPIO8     â”‚   â”‚
â”‚     GND [25] [26] GPIO7     â”‚   â”‚
â”‚     ...                     â”‚   â”‚
â”‚                             â”‚   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚   â”‚   GPIO17     â”‚          â”‚   â”‚
â”‚   â”‚   (Pin 11)   â”‚          â”‚   â”‚
â””â”€â”€â–ºâ”‚   Signal     â”‚          â”‚   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
           â”‚                  â”‚   â”‚
           â”‚ [220Î©]           â”‚   â”‚
           â”‚ Resistor         â”‚   â”‚
           â”‚                  â”‚   â”‚
           â–¼                  â”‚   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
    â”‚   Buzzer (+) â”‚          â”‚   â”‚
    â”‚              â”‚          â”‚   â”‚
    â”‚   Buzzer (-) â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================
    CIRCUIT DIAGRAM - SIMPLE CONNECTION
================================================================

    Pi GPIO17 â”€â”€â”¬â”€[220Î©]â”€â”¬â”€â”€â”€â”€â”€â–º Buzzer (+)
                â”‚         â”‚
                â”‚         â”‚
    Pi GND â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â–º Buzzer (-)

    Components:
    - 1x Buzzer 5V (Active or Passive)
    - 1x Resistor 220Î© or 330Î©
    - 2x Jumper wires

================================================================
    CIRCUIT DIAGRAM - ADVANCED (WITH TRANSISTOR)
================================================================

                         +5V (Pin 2)
                           â”‚
                           â””â”€â”€â–º Buzzer (+)
                                    â”‚
                               â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                               â”‚ Buzzer  â”‚
                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                    â”‚
                                  [C] â—„â”€â”€ Collector
    Pi GPIO17 â”€â”€[1kÎ©]â”€â”€â”€â”€â”€â–º [B]     NPN Transistor
                              [E] â—„â”€â”€ Emitter
                                â”‚
                                â”‚
    Pi GND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€

    Components:
    - 1x Buzzer 5V
    - 1x NPN Transistor (2N2222 or BC547)
    - 1x Resistor 1kÎ© (Base)
    - 3x Jumper wires
    
    Use this if buzzer current > 16mA

================================================================
    SYSTEM WORKFLOW
================================================================

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Start System      â”‚
    â”‚  python3 main.py    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Initialize        â”‚
    â”‚  - Load YOLO Model  â”‚
    â”‚  - Setup GPIO17     â”‚
    â”‚  - Open Camera      â”‚
    â”‚  - Create GUI       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Main Loop         â”‚
    â”‚  (Continuous)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Capture Frame      â”‚
    â”‚  from Camera        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  YOLO Inference     â”‚
    â”‚  Detect 5 classes   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Detected dangerous         â”‚
    â”‚  behavior?                  â”‚
    â”‚  (drowsy, texting, talking, â”‚
    â”‚   turning)                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚ NO          â”‚ YES
        â–¼             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Skip  â”‚   â”‚ Behavior lasted â”‚
    â”‚       â”‚   â”‚ > 3 seconds?    â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚ NO          â”‚ YES
        â”‚         â–¼             â–¼
        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    â”‚ Wait  â”‚   â”‚ Cooldown passed?â”‚
        â”‚    â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â”‚ (15/10/8/5s)    â”‚
        â”‚        â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚        â”‚                â”‚
        â”‚        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚        â”‚         â”‚ NO          â”‚ YES
        â”‚        â”‚         â–¼             â–¼
        â”‚        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        â”‚    â”‚ Skip  â”‚   â”‚ TRIGGER BUZZER  â”‚
        â”‚        â”‚    â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â”‚                 â”‚
        â”‚        â”‚        â”‚       â”‚ GPIO17 = HIGH   â”‚
        â”‚        â”‚        â”‚       â”‚ Wait 2 seconds  â”‚
        â”‚        â”‚        â”‚       â”‚ GPIO17 = LOW    â”‚
        â”‚        â”‚        â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚        â”‚        â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Update Display â”‚
                  â”‚  - GUI          â”‚
                  â”‚  - OpenCV       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Press 'q' or   â”‚
                  â”‚  Ctrl+C ?       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚ NO          â”‚ YES
                    â–¼             â–¼
                Loop back   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                to start    â”‚  Cleanup    â”‚
                            â”‚  GPIO       â”‚
                            â”‚  Release    â”‚
                            â”‚  Camera     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚    Exit     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================
    BEHAVIOR DETECTION LOGIC
================================================================

    Class 0: awake         â†’ No alert (Normal)
    Class 1: drowsy        â†’ Alert (Cooldown: 15s)
    Class 2: texting_phone â†’ Alert (Cooldown: 10s)
    Class 3: turning       â†’ Alert (Cooldown: 5s)
    Class 4: talking_phone â†’ Alert (Cooldown: 8s)

    Detection Process:
    1. Detect class continuously
    2. If dangerous class (1,2,3,4) detected:
       - Start timer
    3. If same class persists > 3 seconds:
       - Check last alert time
    4. If cooldown period passed:
       - Trigger buzzer (2 seconds)
       - Update last alert time
    5. If class changes or stops:
       - Reset timer

================================================================
    GPIO STATES
================================================================

    Initial State:
        GPIO17 = LOW (Buzzer OFF)
    
    Alert Triggered:
        GPIO17 = HIGH (Buzzer ON)
        Wait 2 seconds
        GPIO17 = LOW (Buzzer OFF)
    
    Cleanup (on exit):
        GPIO.cleanup()
        All pins reset to default

================================================================
    TIMING DIAGRAM
================================================================

    Detection:     â”‚â—„â”€â”€â”€â”€â”€ 3s â”€â”€â”€â”€â”€â–ºâ”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    Behavior:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    
    Alert:                           â”‚â—„â”€ 2s â”€â–ºâ”‚
                                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
    GPIO17:        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€
    
    Cooldown:                                 â”‚â—„â”€â”€â”€â”€ 15s â”€â”€â”€â”€â–ºâ”‚
                                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    Next Alert:    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ˆ

================================================================
    POWER CONSUMPTION
================================================================

    Component            Current    Power
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Raspberry Pi 4       600mA      3.0W
    Camera USB           100mA      0.5W
    Buzzer (active)      30mA       0.15W
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Total (normal)       700mA      3.65W
    Total (with buzzer)  730mA      3.8W

    Recommended Power Supply: 5V/3A (15W)

================================================================
    THERMAL PROFILE
================================================================

    Without optimization:
        Idle:   55Â°C
        Load:   68-72Â°C
        Peak:   75Â°C

    With v2.0 optimization:
        Idle:   45Â°C
        Load:   56-60Â°C
        Peak:   62Â°C

    Recommendation:
        - Use heatsink + fan
        - Keep under 70Â°C for stability

================================================================
    FILE STRUCTURE ON RASPBERRY PI
================================================================

    /home/pi/project/
    â”œâ”€â”€ main.py                 â† Main application
    â”œâ”€â”€ best.pt                 â† YOLO model
    â”œâ”€â”€ requirements_minimal.txt
    â”œâ”€â”€ GPIO_SETUP.md
    â”œâ”€â”€ QUICK_START_v2.md
    â””â”€â”€ logs/
        â””â”€â”€ output.log

================================================================
    NETWORK TOPOLOGY (Optional Remote Access)
================================================================

    Internet
       â”‚
       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Router  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ WiFi/Ethernet
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Raspberry Pi 4  â”‚
    â”‚  IP: 192.168.x.xâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    SSH Access:
        ssh pi@192.168.x.x
    
    VNC Access (if GUI needed):
        vncviewer 192.168.x.x:5900

================================================================
    MONITORING & DEBUG
================================================================

    Check GPIO state:
        gpio readall
    
    Check camera:
        ls -l /dev/video*
        v4l2-ctl --list-devices
    
    Check temperature:
        vcgencmd measure_temp
    
    Check processes:
        ps aux | grep python
    
    Monitor GPIO in real-time:
        watch -n 0.1 'gpio readall | grep "GPIO 17"'

================================================================
    BACKUP & RECOVERY
================================================================

    Backup project:
        tar -czf project_backup.tar.gz ~/project/
    
    Restore:
        tar -xzf project_backup.tar.gz -C ~/
    
    Backup SD card (from PC):
        sudo dd if=/dev/sdX of=pi_backup.img bs=4M status=progress
    
    Restore SD card:
        sudo dd if=pi_backup.img of=/dev/sdX bs=4M status=progress

================================================================
    
    ğŸ“ Note: This diagram shows the complete hardware setup
         and system workflow for the GPIO Buzzer version (v2.0)
    
    ğŸ”— For more details, see:
         - GPIO_SETUP.md
         - QUICK_START_v2.md
         - SUMMARY_v2.md
    
================================================================

